% !TEX program = LuaLaTeX + luatex-ja
% Copyright © 2021 Guoo Jehng Lee <edt1023@gmail.com>
% CC BY 4.0 license.
% Chat: https://t.me/TWTUG  (Taiwan TeX User Group)

\documentclass[11pt,a4paper]{article}
% which package used.
%\listfiles
\usepackage[a4paper,textwidth=410pt,textheight=660pt]{geometry}
% 定義 input 路徑
\makeatletter
  \def\input@path{{./pieces/}}
% \def\input@path{{./figures/}{./pieces/}}
\makeatother

% siunitx 和 physics 會有衝突 \qty 要用 \SI 取代。
\usepackage[svgnames]{xcolor}
\usepackage{ltj-zhfonts,parskip,mdframed,mparhack,amsmath,siunitx,textcomp,
  setspace,upgreek}
\usepackage[time=Chinese,style={Traditional,Normal}]{zhnumber}
\usepackage{libertinus}
%\usepackage[math-style=ISO]{unicode-math}

% 定義正誤條邊框顏色及「回目錄」 button 顏色
\definecolor{britishracinggreen}{rgb}{0.0, 0.26, 0.15}
\definecolor{bulgarianrose}{rgb}{0.28, 0.02, 0.03}

% 正誤條的環境定義：
% 章節後不會留有正常空白，需要 startcode 校正。
\newmdenv[linecolor=red,frametitle=誤：,leftmargin=1em,rightmargin=1em,
  startcode=\leavevmode,topline=false,bottomline=false,linewidth=1.2pt,
  skipabove=2ex]{Wrong}
\newmdenv[linecolor=britishracinggreen,frametitle=正：,leftmargin=1em,
  rightmargin=1em,topline=false,bottomline=false,linewidth=1.2pt,
  skipabove=2ex,skipbelow=1ex]{Right}

% 定義程式碼
\newmdenv[leftmargin=1em,rightmargin=1em,linecolor=LightGrey!60,
  linewidth=1.5pt,skipabove=2ex,skipbelow=.5ex,
  backgroundcolor=LightGrey!20]{Code}

% 回目錄的定義
\newcommand{\back}{%
  \begin{flushright}
  \hyperlink{contents}{\textcolor{bulgarianrose}{\iyan 回目錄}}
  \end{flushright}}

\usepackage[pdfstartview={FitH},pdfencoding={auto},
  pdfauthor={李果正 Guoo Jehng Lee},pdfsubject={LaTeX 正誤手冊},
  pdftitle={LaTeX 正誤手冊},pdfkeywords={LaTeX, typesetting, conventions},
  bookmarksopen={true}]{hyperref}

% \zhtoday 定義於 zhnumber 套件。
%\title{\textsf{\textbf{\LaTeX 正誤手冊}}}
\title{\textsf{\textbf{\LaTeX \iyan 正誤手冊}}}
\author{\small 李果正 Guoo Jehng Lee}
\date{\small \zhtoday}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%% 本文開始 %%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\maketitle

排版有許多慣例，甚至最後形成標準。這份文件主要就是排除違反慣例的情況。當
然所謂慣例，除非形成標準，要不然仍然是會有爭議（就算是形成了標準，也還是
有些人不願意遵守），這無所謂對、錯，這份文件的「正誤」也只是針對多數人遵
從的慣例而言，不是完全的非黑即白。

但是關於\TeX/\LaTeX 的語法，這就是非黑即白了，語法錯誤，嚴重的會使編譯中
止，文件出不來，輕一點的是排版結果不符合預期。因此這份文件的所謂正誤，也
包括了語法上的錯誤。

以下每個小節都是一個獨立的單元，為了索引方便，在每一小節末的右手邊
，會有一個「回目錄」的文字 button，可以馬上回到目錄，利於查找，至於到了
目錄，目錄本身的各小節本就有超連結的功能。為了閱讀方便，目錄是放在文件的
最後，當成索引使用。

\section{基礎語法}
\label{sec:syntax}

  \input{b1}
  \input{b2}
  \input{b3}
  \input{b4}

\section{套件使用}
\label{sec:package}

  \input{p1}

\section{使用中文}
\label{sec:chinese}

\section{數理式子}
\label{sec:math}

  \input{m1}
  \input{m2}
  \input{m3}
  \input{m4}
  \input{m5}

\section{圖表處理}
\label{sec:figure}

\section{索引、文獻參考}
\label{sec:index}

\section{其他、雜項}
\label{sec:miscellaneous}

\clearpage
\hypertarget{contents}{}
\tableofcontents

\end{document}
